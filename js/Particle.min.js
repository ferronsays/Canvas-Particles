Particle=function(a){this.init(a)},Particle.prototype.init=function(a){this.settings={context:null,blendMode:"normal",radial:!1,alive:!0,position:new Vector2D(0,0),velocity:new Vector2D(0,0),size:1,deltaSize:1,lifeSpan:1,sharpness:100,inner:null,colorArray:[255,255,255,1],deltaColor:[0,0,0,0],gravitate:!1,forceVector:new Vector2D(0,0)},this.age=1;for(var b in a)a.hasOwnProperty(b)&&(this.settings[b]=a[b])},Particle.prototype.update=function(a){if(this.age+=a,this.age>this.settings.lifeSpan)return void this.kill();if(this.settings.velocity.add(this.calculateAcceleration()),this.settings.position.add(this.settings.velocity),this.outOfBounds())return void this.kill();this.settings.size+=this.settings.deltaSize*a,this.settings.radial&&(this.settings.inner=~~(this.settings.size/200*this.settings.sharpness));var b=this.settings.colorArray[0]+=this.settings.deltaColor[0]*a,c=this.settings.colorArray[1]+=this.settings.deltaColor[1]*a,d=this.settings.colorArray[2]+=this.settings.deltaColor[2]*a,e=this.settings.colorArray[3]+=this.settings.deltaColor[3]*a;b=b>255?255:0>b?0:~~b,c=c>255?255:0>c?0:~~c,d=d>255?255:0>d?0:~~d,e=e>1?1:0>e?0:e.toFixed(2),this.settings.drawColor="rgba("+b+","+c+","+d+","+e+")",this.settings.drawColorTransparent="rgba("+b+","+c+","+d+", 0)"},Particle.prototype.draw=function(){if(this.settings.alive)if(this.settings.radial){var a=this.settings.size>>1,b=~~(this.settings.position.x-a),c=~~(this.settings.position.y-a),d=this.settings.context.createRadialGradient(b+a,c+a,this.settings.inner,b+a,c+a,a);d.addColorStop(0,this.settings.drawColor),d.addColorStop(1,this.settings.drawColorTransparent),this.settings.context.save(),this.settings.context.globalCompositeOperation=this.settings.blendMode,this.settings.context.fillStyle=d,this.settings.context.fillRect(b,c,this.settings.size,this.settings.size),this.settings.context.restore()}else this.settings.context.save(),this.settings.context.globalCompositeOperation=this.settings.blendMode,this.settings.context.beginPath(),this.settings.context.fillStyle=this.settings.drawColor,this.settings.context.arc(this.settings.position.x,this.settings.position.y,this.settings.size,0,2*Math.PI,!1),this.settings.context.fill(),this.settings.context.restore()},Particle.prototype.calculateAcceleration=function(){return this.settings.gravitate?this.settings.forceVector:new Vector2D(0,0)},Particle.prototype.outOfBounds=function(){var a=yMin=0-this.settings.size,b=this.settings.context.canvas.width+this.settings.size,c=this.settings.context.canvas.height+this.settings.size;return this.settings.position.x<a||this.settings.position.x>b?!0:this.settings.position.y<yMin||this.settings.position.y>c?!0:!1},Particle.prototype.kill=function(){this.settings.alive=!1};